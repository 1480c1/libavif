From ab2f4a88435fd9bce3db37a926bdf3dec214ad44 Mon Sep 17 00:00:00 2001
From: Luca Barbato <lu_zero@gentoo.org>
Date: Sun, 24 May 2020 15:30:23 +0200
Subject: [PATCH] Use the correct macro designator

(Cherry picked from https://github.com/xiph/rav1e/pull/2324)

---
 src/asm/aarch64/transform/inverse.rs | 4 ++--
 src/asm/x86/cdef.rs                  | 2 +-
 src/asm/x86/dist.rs                  | 2 +-
 src/asm/x86/transform/inverse.rs     | 4 ++--
 4 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/asm/aarch64/transform/inverse.rs b/src/asm/aarch64/transform/inverse.rs
index fe89b52d..87871524 100644
--- a/src/asm/aarch64/transform/inverse.rs
+++ b/src/asm/aarch64/transform/inverse.rs
@@ -44,7 +44,7 @@ pub fn inverse_transform_add<T: Pixel>(
 
 macro_rules! decl_itx_fns {
   // Takes a 2d list of tx types for W and H
-  ([$([$(($ENUM:pat, $TYPE1:ident, $TYPE2:ident)),*]),*], $W:expr, $H:expr,
+  ([$([$(($ENUM:expr, $TYPE1:ident, $TYPE2:ident)),*]),*], $W:expr, $H:expr,
    $OPT_LOWER:ident, $OPT_UPPER:ident) => {
     paste::item! {
       // For each tx type, declare an function for the current WxH
@@ -183,7 +183,7 @@ mod test {
   use crate::transform::TxSize::*;
 
   macro_rules! test_itx_fns {
-    ($(($ENUM:pat, $TYPE1:ident, $TYPE2:ident, $W:expr, $H:expr)),*, $OPT:ident, $OPTLIT:literal, $OPT_ENUM:pat) => {
+    ($(($ENUM:expr, $TYPE1:ident, $TYPE2:ident, $W:expr, $H:expr)),*, $OPT:ident, $OPTLIT:tt, $OPT_ENUM:expr) => {
       $(
         paste::item! {
           #[test]
diff --git a/src/asm/x86/cdef.rs b/src/asm/x86/cdef.rs
index 0cd215f5..d46d138c 100644
--- a/src/asm/x86/cdef.rs
+++ b/src/asm/x86/cdef.rs
@@ -222,7 +222,7 @@ mod test {
   use std::str::FromStr;
 
   macro_rules! test_cdef_fns {
-    ($(($XDEC:expr, $YDEC:expr)),*, $OPT:ident, $OPTLIT:literal) => {
+    ($(($XDEC:expr, $YDEC:expr)),*, $OPT:ident, $OPTLIT:tt) => {
       $(
         paste::item! {
           #[interpolate_test(dir_0, 0)]
diff --git a/src/asm/x86/dist.rs b/src/asm/x86/dist.rs
index dfa64bc7..6a5939cb 100644
--- a/src/asm/x86/dist.rs
+++ b/src/asm/x86/dist.rs
@@ -443,7 +443,7 @@ mod test {
   use std::str::FromStr;
 
   macro_rules! test_dist_fns {
-    ($(($W:expr, $H:expr)),*, $DIST_TY:ident, $BD:expr, $OPT:ident, $OPTLIT:literal) => {
+    ($(($W:expr, $H:expr)),*, $DIST_TY:ident, $BD:expr, $OPT:ident, $OPTLIT:tt) => {
       $(
         paste::item! {
           #[test]
diff --git a/src/asm/x86/transform/inverse.rs b/src/asm/x86/transform/inverse.rs
index 791d1bda..ef5a459f 100644
--- a/src/asm/x86/transform/inverse.rs
+++ b/src/asm/x86/transform/inverse.rs
@@ -44,7 +44,7 @@ pub fn inverse_transform_add<T: Pixel>(
 
 macro_rules! decl_itx_fns {
   // Takes a 2d list of tx types for W and H
-  ([$([$(($ENUM:pat, $TYPE1:ident, $TYPE2:ident)),*]),*], $W:expr, $H:expr,
+  ([$([$(($ENUM:expr, $TYPE1:ident, $TYPE2:ident)),*]),*], $W:expr, $H:expr,
    $OPT_LOWER:ident, $OPT_UPPER:ident) => {
     paste::item! {
       // For each tx type, declare an function for the current WxH
@@ -176,7 +176,7 @@ mod test {
   use crate::transform::TxSize::*;
 
   macro_rules! test_itx_fns {
-    ($(($ENUM:pat, $TYPE1:ident, $TYPE2:ident, $W:expr, $H:expr)),*, $OPT:ident, $OPTLIT:literal, $OPT_ENUM:pat) => {
+    ($(($ENUM:expr, $TYPE1:ident, $TYPE2:ident, $W:expr, $H:expr)),*, $OPT:ident, $OPTLIT:tt, $OPT_ENUM:expr) => {
       $(
         paste::item! {
           #[test]
